<!-- ÷ TODO:  (можна ввести декілька адрес через кому) -->
<!-- [style.visibility]="showDialog ? 'visible': 'hidden'" -->
<md-card class="share-card"
  [@visibilityChanged]="isVisible"
  (@visibilityChanged.done)="animationDone($event)" >

  <form #shareForm="ngForm" (ngSubmit)="onSubmit()" >
    <h2 *ngIf="formState('')">Надіслати по email</h2>
    <h2 *ngIf="formState('emailIsBeingSent')">Надсилаю повідомлення...</h2>
    <h2 *ngIf="formState('emailSent')">Повідомлення надіслано</h2>
    <h2 *ngIf="formState('emailSendError')">Сталася помилка {{emailSendError}}</h2>
    <h2 *ngIf="formState('formIsNotComplete')">Форма ще не готова до відправки</h2>
    <md-input
      [(ngModel)]="toEmail"
      name="toEmail"
      id="toEmail"
      class="wide bt-input"
      (blur)="handleInputBlur($event)"
      #toEmailElement
      validateEmail="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$">
        <md-placeholder>
          Кому:
        </md-placeholder>
    </md-input>

    <div *ngIf="formErrors.toEmail" class="alert alert-danger">
      {{ formErrors.toEmail }}
    </div>

    <md-input
      disabled
      [ngModel]="emailSubject" id="emailSubject" name="emailSubject"
      class="wide bt-input">
      <md-placeholder>
        Тема:
      </md-placeholder>
    </md-input>

    <label for="textToReader" class="textarea-label">Текст:</label>

    <textarea
      [(ngModel)]="textToReader"
      class="bp-textarea"
      id="textToReader"
      name="textToReader"
      rows="10">{{textToReader}}
      <md-placeholder>
        Текст:
      </md-placeholder>
    </textarea>

    <md-input
      [(ngModel)]="videoUrl"
      id="videoUrl"
      name="videoUrl"
      class="wide bt-input">
      <md-placeholder>
        Відео (посилання):
      </md-placeholder>
    </md-input>
  </form>

  <a href (click)="shareProject()"><button md-raised-button color="accent" class="bt-input">Надіслати листа</button></a>

  <a *ngIf="!showEmailPreview" href (click)="toggleEmailPreview()"><button md-button>Показати листа</button></a>
  <a *ngIf="showEmailPreview" href (click)="toggleEmailPreview()"><button md-raised-button>Сховати листа</button></a>

  <md-card *ngIf="showEmailPreview" class="email-preview">
    <h2>Попередній перегляд листа:</h2>
    <p
      [innerHTML]="emailHtml"
      class="bp-pre">
    </p>
  </md-card>

  <a *ngIf="!showHtmlPreview" href (click)="toggleHtmlPreview()"><button md-button>Показати HTML</button></a>
  <a *ngIf="showHtmlPreview" href (click)="toggleHtmlPreview()"><button md-raised-button>Сховати HTML</button></a>

  <a href (click)="showSharer()"><button md-button>Відміна</button></a>

  <div
    *ngIf="showHtmlPreview"
    class="bp-pre-html">
    {{emailHtml}}
  </div>

</md-card>

<!-- [@visibilityChanged]="!isVisible" -->
<a href (click)="showSharer()" class="share-show">
  <button md-raised-button color="accent">Поширити</button>
</a>
